Let’s take a quick look at how that might work. Imagine that we have a bunch of keys in a  Redis  database, and we want to iterate over their data, but we fetch the data only on demand. An asynchronous iterator for that might look like  Example 3-25 . *Example 3-25. Async iterator for fetching data from Redis* `import` ` ` `asyncio` `from` ` ` `aioredis` ` ` `import` ` ` `create_redis` `async` ` ` `def` ` ` `main` `():` `  ` `    ` `redis` ` ` `=` ` ` `await` ` ` `create_redis` `((` `'localhost'` `,` ` ` `6379` `))` `  ` `    ` `keys` ` ` `=` ` ` `[` `'Americas'` `,` ` ` `'Africa'` `,` ` ` `'Europe'` `,` ` ` `'Asia'` `]` `  ` `    ` `async` ` ` `for` ` ` `value` ` ` `in` ` ` `OneAtATime` `(` `redis` `,` ` ` `keys` `):` `  ` `        ` `await` ` ` `do_something_with` `(` `value` `)` `  ` `class` ` ` `OneAtATime` `:` `    ` `def` ` ` `__init__` `(` `self` `,` ` ` `redis` `,` ` ` `keys` `):` `  ` `        ` `self` `.` `redis` ` ` `=` ` ` `redis` `        ` `self` `.` `keys` ` ` `=` ` ` `keys` `    ` `def` ` ` `__aiter__` `(` `self` `):` `  ` `        ` `self` `.` `ikeys` ` ` `=` ` ` `iter` `(` `self` `.` `keys` `)` `        ` `return` ` ` `self` `    ` `async` ` ` `def` ` ` `__anext__` `(` `self` `):` `  ` `        ` `try` `:` `            ` `k` ` ` `=` ` ` `next` `(` `self` `.` `ikeys` `)` `  ` `        ` `except` ` ` `StopIteration` `:` `  ` `            ` `raise` ` ` `StopAsyncIteration` `        ` `value` ` ` `=` ` ` `await` ` ` `redis` `.` `get` `(` `k` `)` `  ` `        ` `return` ` ` `value` `asyncio` `.` `run` `(` `main` `())` The  `main()`  function: we run it using  `asyncio.run()`  toward the bottom of the code sample. We use the high-level interface in  `aioredis`  to get a connection. Imagine that each of the values associated with these keys is quite large and stored in the Redis instance. We’re using  `async for` : the point is that  *iteration*   *is able to suspend itself*  while waiting for the next datum to arrive. For completeness, imagine that we also perform some I/O-bound activity on the fetched value—perhaps a simple data transformation—and then it gets sent on to another destination. **52 ** **| ** **Chapter 3: Asyncio Walk-Through**