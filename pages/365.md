Proﬁling C Code with Dtrace 
#Pro�ling C Code with Dtrace 

 The CPython source code has several markers for a tracing tool called dtrace. dtrace executes a compiled C/C++ binary, then catches and handles events within it using  probes . For dtrace to provide any meaningful data, the compiled application must have custom  markers  compiled into the application. These are events raised during the runtime. The markers can attach arbitrary data to help with tracing. For example, inside the frame evaluation function, in  Python ceval.c , there is a call to  dtrace_function_entry() : if  (PyDTrace_FUNCTION_ENTRY_ENABLED()) dtrace_function_entry(f); This raises a marker called  function__entry  in dtrace every time a function is entered. CPython has builtin markers for: • Line execution • Function entry and return (frame execution) • Garbage collection start and completion • Module import start and completion • Audit hook events from  sys.audit() Each of these markers has arguments with more information. The function__entry  marker has arguments for: • File name • Fuction name • Line number The static marker arguments are deﬁned in the  Oﬃcial Documentation 365