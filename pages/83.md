If we’re willing to give up the convenience of the  `asyncio.run()`  function (until Python 3.9 is available), we can do better with custom loop handling, shown in Example 3-39 . *Example 3-39. Option C: just like camping, bring your own loop and your own executor* `# quickstart.py` `import` ` ` `time` `import` ` ` `asyncio` `from` ` ` `concurrent.futures` ` ` `import` ` ` `ThreadPoolExecutor` ` ` `as` ` ` `Executor` `async` ` ` `def` ` ` `main` `():` `    ` `print` `(` `f` `'{time.ctime()} Hello!'` `)` `    ` `await` ` ` `asyncio` `.` `sleep` `(` `1.0` `)` `    ` `print` `(` `f` `'{time.ctime()} Goodbye!'` `)` `    ` `loop` `.` `stop` `()` `def` ` ` `blocking` `():` `    ` `time` `.` `sleep` `(` `2.0` `)` `    ` `print` `(` `f` `"{time.ctime()} Hello from a thread!"` `)` `loop` ` ` `=` ` ` `asyncio` `.` `get_event_loop` `()` `executor` ` ` `=` ` ` `Executor` `()` `  ` `loop` `.` `set_default_executor` `(` `executor` `)` `  ` `loop` `.` `create_task` `(` `main` `())` `future` ` ` `=` ` ` `loop` `.` `run_in_executor` `(` `None` `,` ` ` `blocking` `)` `  ` `try` `:` `    ` `loop` `.` `run_forever` `()` `except` ` ` `KeyboardInterrupt` `:` `    ` `print` `(` `'Cancelled'` `)` `tasks` ` ` `=` ` ` `asyncio` `.` `all_tasks` `(` `loop` `=` `loop` `)` `for` ` ` `t` ` ` `in` ` ` `tasks` `:` `    ` `t` `.` `cancel` `()` `group` ` ` `=` ` ` `asyncio` `.` `gather` `(` `*` `tasks` `,` ` ` `return_exceptions` `=` `True` `)` `loop` `.` `run_until_complete` `(` `group` `)` `executor` `.` `shutdown` `(` `wait` `=` `True` `)` `  ` `loop` `.` `close` `()` This time, we create our own executor instance. We have to set our custom executor as the default one for the loop. This means that anywhere the code calls  `run_in_executor()` , it’ll be using our custom instance. As before, we run the blocking function. Finally, we can explicitly wait for all the executor jobs to finish before closing the loop. This will avoid the “Event loop is closed” messages that we saw before. We can do this because we have access to the executor object; the default executor is **72 ** **| ** **Chapter 3: Asyncio Walk-Through**