*Example 3-38. Option B: add the executor future to the gathered tasks* `# quickstart.py` `import` ` ` `time` `import` ` ` `asyncio` `from` ` ` `concurrent.futures` ` ` `import` ` ` `ThreadPoolExecutor` ` ` `as` ` ` `Executor` `async` ` ` `def` ` ` `make_coro` `(` `future` `):` `  ` `    ` `try` `:` `        ` `return` ` ` `await` ` ` `future` `    ` `except` ` ` `asyncio` `.` `CancelledError` `:` `        ` `return` ` ` `await` ` ` `future` `async` ` ` `def` ` ` `main` `():` `    ` `loop` ` ` `=` ` ` `asyncio` `.` `get_running_loop` `()` `    ` `future` ` ` `=` ` ` `loop` `.` `run_in_executor` `(` `None` `,` ` ` `blocking` `)` `    ` `asyncio` `.` `create_task` `(` `make_coro` `(` `future` `))` `  ` `    ` `print` `(` `f` `'{time.ctime()} Hello!'` `)` `    ` `await` ` ` `asyncio` `.` `sleep` `(` `1.0` `)` `    ` `print` `(` `f` `'{time.ctime()} Goodbye!'` `)` `def` ` ` `blocking` `():` `    ` `time` `.` `sleep` `(` `2.0` `)` `    ` `print` `(` `f` `"{time.ctime()} Hello from a thread!"` `)` `try` `:` `    ` `asyncio` `.` `run` `(` `main` `())` `except` ` ` `KeyboardInterrupt` `:` `    ` `print` `(` `'Bye!'` `)` We take the future returned from the  `run_in_executor()`  call and pass it into a new utility function,  `make_coro()` . The important point here is that we’re using `create_task()` , which means that this task  *will*  appear in the list of  `all_tasks()` within the shutdown handling of  `asyncio.run()` , and will receive a cancellation during the shutdown process. This utility function  `make_coro()`  simply waits for the future to complete—but crucially, it  *continues to wait*  for the future even inside the exception handler for `CancelledError` . This solution is better behaved during shutdown, and I encourage you to run the example and hit Ctrl-C immediately after “Hello!” is printed. The shutdown process will still wait for  `make_coro()`  to exit, which means that it also waits for our executor job to exit. However, this code is very clumsy because you have to wrap every executor  `Future`  instance inside a  `make_coro()`  call. **Starting Up and Shutting Down (Gracefully!) ** **| ** **71**