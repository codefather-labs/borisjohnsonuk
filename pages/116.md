Example: Adding an Almost Equal Comparison Operator | Compare(expr left, cmpop* ops, expr* comparators) Inside the  Compare  deﬁnition is a reference to the  cmpop  enumeration: cmpop = Eq | NotEq | Lt | LtE | Gt | GtE | Is | IsNot | In | NotIn This is a list of possible AST leaf nodes that can act as comparison operators. Ours is missing and needs to be added. Update the list of options to include a new type,  AlE  ( Al most  E qual): cmpop = Eq | NotEq | Lt | LtE | Gt | GtE | Is | IsNot | In | NotIn | AlE Next, regenerate the AST again to update the AST C header ﬁles: $ make regen-ast This will have updated the comparison operator,  _cmpop , enum inside Include/Python-ast.h  to include the  AlE  option: typedef enum  _cmpop { Eq= 1 , NotEq= 2 , Lt= 3 , LtE= 4 , Gt= 5 , GtE= 6 , Is= 7 , IsNot= 8 , In= 9 , NotIn= 10 , AlE= 11  } cmpop_ty; The AST has no knowledge that the  ALMOSTEQUAL  token is equivalent to the  AlE  comparison operator. So you need to update the C code for the AST. Navigate to  ast_for_comp_op()  in  Python ast.c . Find the switch statement for the operator tokens. This returns one of the  _cmpop  enumeration values. Add two lines, to catch the  ALMOSTEQUAL  token and return the  AlE  comparison operator: Python ast.c  line 1199 static  cmpop_ty ast_for_comp_op( struct  compiling *c,  const  node *n) { /* comp_op: '<'|'>'|'=='|'>='|'<='|'!='|'in'|'not' 'in'|'is' 116