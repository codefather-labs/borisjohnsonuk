Generators gen_send_ex()  is the function that converts a generator object into the next yielded result. You’ll see many similarities with the way frames are constructed from a code object as these functions have similar tasks. The  gen_send_ex()  function is shared with generators, coroutines, and async generators and has the following steps: 1. The current thread state is fetched 2. The frame object from the generator object is fetched 3. If the generator is running when  __next__()  was called, raise a ValueError 4. If the frame inside the generator is at the top of the stack: • In the case of a coroutine, if the coroutine is not already marked as closing, a  RuntimeError  is raised • If this is an async generator, raise a  StopAsyncIteration • For a standard generator, a  StopIteration  is raised. 5. If the last instruction in the frame ( f->f_lasti ) is still -1 because it has just been started, and this is a coroutine or async generator, then a non-None value can’t be passed as an argument, so an exception is raised 6. Else, this is the ﬁrst time it’s being called, and arguments are allowed. The value of the argument is pushed to the frame’s value stack 7. The  f_back  ﬁeld of the frame is the caller to which return values are sent, so this is set to the current frame in the thread. This means that the return value is sent to the caller, not the creator of the generator 8. The generator is marked as running 9. The last exception in the generator’s exception info is copied from the last exception in the thread state 10. The thread state exception info is set to the address of the generator’s exception info. This means that if the caller enters a break- 274