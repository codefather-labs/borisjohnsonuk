These two case studies show a progression in thinking around the design of a message distribution system. A key aspect was the realization that sending and receiving data might be best handled in separate coroutines, depending on the use case. In such instances, queues can be very useful for moving data between those different coroutines and for providing buffering to decouple them. The more important goal of these case studies was to show how the streams API in `asyncio`  makes it very easy to build socket-based applications. ### Twisted
 The  Twisted  project predates—dramatically—the  `asyncio`  standard library, and has been flying the flag of async programming in Python for around 14 years now. The project provides not only the basic building blocks, like an event loop, but also primitives like  *deferreds*  that are a bit like the futures in  `asyncio` . The design of  `asyncio` has been heavily influenced by Twisted and the extensive experience of its leaders and maintainers. Note that  `asyncio`  does  *not*  replace Twisted . Twisted includes high-quality implementations of a huge number of internet protocols, including not only the usual HTTP but also XMPP, NNTP, IMAP, SSH, IRC, and FTP (both servers and clients). And the list goes on: DNS? Check. SMTP? Check. POP3? Check. The availability of these excellent internet protocol implementations continues to make Twisted compelling. At the code level, the main difference between Twisted and  `asyncio` , apart from history and historical context, is that for a long time Python lacked language support for coroutines, and this meant that Twisted and projects like it had to figure out ways of dealing with asynchronicity that worked with standard Python syntax. For most of Twisted’s history,  *callbacks*  were the means by which async programming was done, with all the nonlinear complexity that entails; however, when it became possible to use generators as makeshift coroutines, it suddenly became possible to lay out code in Twisted in a linear fashion using its  `@defer.inlineCallbacks`  decorator, as shown in  Example 4-10 . *Example 4-10. Even more Twisted with inlined callbacks* `@defer` `.` `inlineCallbacks` `  ` `def` ` ` `f` `():` `    ` `yield` `    ` `defer` `.` `returnValue` `(` `123` `)` `  ` `@defer` `.` `inlineCallbacks` `def` ` ` `my_coro_func` `():` `    ` `value` ` ` `=` ` ` `yield` ` ` `f` `()` `  ` `    ` `assert` ` ` `value` ` ` `==` ` ` `123` **88 ** **| ** **Chapter 4: 20 Asyncio Libraries You Aren’t Using (But…Oh, Never Mind)**