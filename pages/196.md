The CPython Memory Allocator A partially allocated pool with a combination f used, freed, and available blocks: Pool freeblock Clean Blocks 
##Block Allocation API 

 When a block of memory is requested by a memory domain that uses pymalloc , the  pymalloc_alloc  function will be called. This function is a good place to insert a breakpoint and step through the code to test your knowledge of the blocks, pools, and arenas. Objects obmalloc.c  line 1590 static  inline  void * pymalloc_alloc( void  *ctx,  size_t  nbytes) { ... For a request of  nbytes = 30 , it is neither zero, nor below the  SMALL_- REQUEST_THRESHOLD  of 512: if  (UNLIKELY(nbytes ==  0 )) { return  NULL; } if  (UNLIKELY(nbytes > SMALL_REQUEST_THRESHOLD)) { return  NULL; } For a 64-bit system, the size class index is calculated as 1. This correlates to the 2nd class size index (17-32 bytes). The target pool is then usedpools[1 + 1]  ( usedpools[2] ): 196