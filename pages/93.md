`  ` `parser` `.` `add_argument` `(` `'--host'` `,` ` ` `default` `=` `'localhost'` `)` `  ` `parser` `.` `add_argument` `(` `'--port'` `,` ` ` `default` `=` `25000` `,` ` ` `type` `=` `int` `)` `  ` `parser` `.` `add_argument` `(` `'--channel'` `,` ` ` `default` `=` `'/topic/foo'` `)` `  ` `parser` `.` `add_argument` `(` `'--interval'` `,` ` ` `default` `=` `1` `,` ` ` `type` `=` `float` `)` `  ` `parser` `.` `add_argument` `(` `'--size'` `,` ` ` `default` `=` `0` `,` ` ` `type` `=` `int` `)` `  ` `try` `:` `    ` `asyncio` `.` `run` `(` `main` `(` `parser` `.` `parse_args` `()))` `  ` `except` ` ` `KeyboardInterrupt` `:` `    ` `print` `(` `'Bye!'` `)` As with the listener, claim an identity. Reach out and make a connection. According to our protocol rules, the first thing to do after connecting to the server is to give the name of the channel to subscribe to; however, since we are a sender, we don’t really care about subscribing to any channels. Nevertheless, the protocol requires it, so just provide a null channel to subscribe to (we won’t actually listen for anything). Send the channel to subscribe to. The command-line parameter  `args.channel`  provides the channel  *to which*  we want to send messages. It must be converted to bytes first before sending. Using  `itertools.count()`  is like a  `while True`  loop, except that we get an iteration variable to use. We use this in the debugging messages since it makes it a bit easier to track which message got sent from where. The delay between sent messages is an input parameter,  `args.interval` . The next line generates the message payload. It’s either a bytestring of specified size ( `args.size` ) or a descriptive message. This flexibility is just for testing. Note that  *two*  messages are sent here: the first is the destination channel name, and the second is the payload. As with the listener, there are a bunch of command-line options for tweaking the sender:  `channel`  determines the target channel to send to, while  `interval`  controls the delay between sends. The  `size`  parameter controls the size of each message payload. We now have a broker, a listener, and a sender; it’s time to see some output. To produce the following code snippets, I started up the server, then two listeners, and then a sender. Then, after a few messages had been sent, I stopped the server with Ctrl-C. **82 ** **| ** **Chapter 4: 20 Asyncio Libraries You Aren’t Using (But…Oh, Never Mind)**