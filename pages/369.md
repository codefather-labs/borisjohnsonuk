Proﬁling C Code with Dtrace printf( "%*s" , self->indent,  "" ); printf( "%s:%s:%dn" , basename(copyinstr(arg0)), copyinstr(arg1), arg2); self->last = timestamp; } python$target::: function - return /basename(copyinstr(arg0)) ==  "portscanner_multithreaded.py" && copyinstr(arg1) ==  "main" / { self->trace =  0 ; } This script will print a line every time a function is executed and time the delta between the function starting and exiting. You need to execute with the script argument,  -s profile_compare  and the command argument,  -c './python portscanner_multithreaded.py : $ sudo dtrace -s profile_compare.d -c './python portscanner_multithreaded.py' 0 function-entry:portscanner_multithreaded.py:main:16 28 function-entry: queue.py:__init__:33 18 function-entry: queue.py:_init:205 29 function-return: queue.py:_init:206 46 function-entry: threading.py:__init__:223 33 function-return: threading.py:__init__:245 27 function-entry: threading.py:__init__:223 26 function-return: threading.py:__init__:245 26 function-entry: threading.py:__init__:223 25 function-return: threading.py:__init__:245 In the output, the ﬁrst column is the time-delta in microseconds since the last event, then the event name, the ﬁlename and line number. When function calls are nested, the ﬁlename will be increasingly indented to the right. 369